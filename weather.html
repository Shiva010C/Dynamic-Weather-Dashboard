<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
    --primary-color: #4A90E2;
    --secondary-color: #F5F5F5;
    --text-color: #333;
    --light-text-color: #fff;
    --border-radius: 20px;
    --box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    background-color: var(--secondary-color);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 15px;
}

.container {
    width: 100%;
    max-width: 1200px;
    background: #fff;
    border-radius: var(--border-radius);
    padding: 30px;
    box-shadow: var(--box-shadow);
}

.search-bar {
    display: flex;
    margin-bottom: 20px;
    gap: 10px;
}

.search-bar input {
    width: 100%;
    padding: 10px 20px;
    border-radius: 15px;
    border: 1px solid #ddd;
    font-size: 16px;
}

.search-bar button {
    padding: 10px 20px;
    border: none;
    background-color: var(--primary-color);
    color: var(--light-text-color);
    border-radius: 15px;
    cursor: pointer;
    font-size: 16px;
}

.weather-container {
    display: flex;
    gap: 30px;
    flex-wrap: wrap;
}

.current-weather {
    flex: 1;
    background: linear-gradient(135deg, #5D9CEC, #4A90E2);
    color: var(--light-text-color);
    padding: 25px;
    border-radius: var(--border-radius);
    text-align: center;
    min-width: 280px;
}

.location {
    font-size: 24px;
    font-weight: 500;
    margin-bottom: 15px;
}

.main-temp {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 0;
}

#current-temp {
    font-size: 80px;
    font-weight: 600;
}

#current-weather-icon {
    width: 120px;
    height: 120px;
    margin-right: -10px;
}

.feels-like,
.weather-description {
    font-size: 18px;
    font-weight: 300;
}

.weather-description {
    text-transform: capitalize;
}

.weather-details {
    flex: 2;
    display: flex;
    flex-direction: column;
    min-width: 300px;
}

.hourly-forecast {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;   /*c */
    background: #F9F9F9;
    padding: 15px;    /*c */
    border-radius: var(--border-radius);
    overflow-x: auto;
    flex-shrink: 0;
}


.hour-item {
    text-align: center;
    min-width: 60px;
}

.hour-item p {
    margin: 5px 0;
    color: var(--text-color);
}

.hour-item img {
    width: 40px;
    height: 40px;
}

.details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;    /*c */
}

.detail-item {
    background: #F9F9F9;
    padding: 15px;     /*c */
    border-radius: var(--border-radius);
    text-align: center;
}

.detail-item p {
    color: #888;
    font-size: 14px;
}

.detail-item .value {
    color: var(--text-color);
    font-size: 18px;
    font-weight: 600;
    margin-top: 5px;
}

.forecast-container {
    margin-top: 20px;
}

.forecast-container h2 {
    margin-bottom: 15px;
    color: var(--text-color);
}

.five-day-forecast {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 20px;
}

.day-item {
    background: #F9F9F9;
    padding: 15px;
    border-radius: var(--border-radius);
    text-align: center;
}

.day-item p {
    margin-bottom: 10px;
}

.day-item img {
    width: 50px;
    height: 50px;
    margin: 5px 0;
}

.day-item .temp {
    font-weight: 600;
}

/* Responsive Design */
@media (max-width: 992px) {
    .weather-container {
        flex-direction: column;
    }
}

@media (max-width: 768px) {
    .container {
        padding: 20px;
    }

    #current-temp {
        font-size: 60px;
    }

    #current-weather-icon {
        width: 100px;
        height: 100px;
    }
}

/* ========================================= */
/* Mobile Responsive Fixes (540px)      */
/* ========================================= */

@media (max-width: 540px) {

    .container {
        padding: 20px 15px;
        /* छोटे स्क्रीन पर साइड पैडिंग कम करें */
    }
    .weather-details{
        max-width: 540px;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
    }
    .hourly-forecast {
        overflow-x: auto;
        gap: 20px;
        scroll-snap-type: x mandatory;
    }

    .hour-item {
        flex: 0 0 60px;
        scroll-snap-align: start;
    }

    .hourly-forecast::-webkit-scrollbar {
        display: none;
    }

    /* 5 Day Forecast को हॉरिजॉन्टल स्क्रॉल वाला बनाएं */
    .five-day-forecast {
        display: flex;
        /* ग्रिड से फ्लेक्स में बदलें */
        overflow-x: auto;
        /* हॉरिजॉन्टल स्क्रॉल को सक्षम करें */
        scroll-snap-type: x mandatory;
        /* स्मूथ स्क्रॉलिंग के लिए */
        padding-bottom: 15px;
        /* स्क्रॉलबार के लिए जगह */
        gap: 12px;
    }

    .day-item {
        flex: 0 0 90px;
        /* आइटम को सिकुड़ने से रोकें और एक निश्चित चौड़ाई दें */
        scroll-snap-align: start;
    }

    /* डिटेल्स ग्रिड को बेहतर बनाएं */
    .details-grid {
        grid-template-columns: 1fr 1fr;
        /* हमेशा 2 कॉलम रखें */
        gap: 15px;
    }

    .detail-item {
        padding: 15px;
    }

    #current-temp {
        font-size: 70px;
    }

    #current-weather-icon {
        width: 100px;
        height: 100px;
    }

    /* Chrome/Safari पर स्क्रॉलबार को छिपाने के लिए (Optional) */
    .five-day-forecast::-webkit-scrollbar {
        display: none;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <div class="search-bar">
            <input type="text" id="city-input" placeholder="Search for a city...">
            <button id="search-btn">Search</button>
        </div>

        <div class="weather-container">
            <div class="current-weather">
                <div class="location" id="location">London</div>
                <div class="main-temp">
                    <img src="http://openweathermap.org/img/wn/10d@4x.png" alt="weather icon" id="current-weather-icon">
                    <h1 id="current-temp">24°C</h1>
                </div>
                <p class="feels-like" id="feels-like">Feels like 26°C</p>
                <p class="weather-description" id="weather-description">Sunny</p>
            </div>

            <div class="weather-details">
                <div class="hourly-forecast" id="hourly-forecast">
                    </div>

                <div class="details-grid">
                    <div class="detail-item">
                        <p>Wind Speed</p>
                        <p class="value" id="wind-speed">15 km/h</p>
                    </div>
                    <div class="detail-item">
                        <p>Humidity</p>
                        <p class="value" id="humidity">60%</p>
                    </div>
                    <div class="detail-item">
                        <p>UV Index</p>
                        <p class="value" id="uv-index">5</p>
                    </div>
                    <div class="detail-item">
                        <p>Pressure</p>
                        <p class="value" id="pressure">1012 hPa</p>
                    </div>
                    <div class="detail-item">
                        <p>Sunrise</p>
                        <p class="value" id="sunrise">6:00 AM</p>
                    </div>
                    <div class="detail-item">
                        <p>Sunset</p>
                        <p class="value" id="sunset">8:00 PM</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="forecast-container">
            <h2>5 Day Forecast</h2>
            <div class="five-day-forecast" id="five-day-forecast">
                </div>
        </div>
    </div>

    <!-- <script src="main.js"></script> -->
     <script>
        document.addEventListener('DOMContentLoaded', () => {
    const apiKey = '4872f50d300161d7d0277819ac8cadb3'; // <-- यहाँ अपनी API Key डालें, यह बहुत ज़रूरी है

    // HTML Elements
    const locationEl = document.getElementById('location');
    const currentTempEl = document.getElementById('current-temp');
    const feelsLikeEl = document.getElementById('feels-like');
    const weatherDescriptionEl = document.getElementById('weather-description');
    const currentIconEl = document.getElementById('current-weather-icon');
    const windSpeedEl = document.getElementById('wind-speed');
    const humidityEl = document.getElementById('humidity');
    const uvIndexEl = document.getElementById('uv-index'); // UV Index free forecast API में नहीं मिलता
    const pressureEl = document.getElementById('pressure');
    const sunriseEl = document.getElementById('sunrise');
    const sunsetEl = document.getElementById('sunset');
    const hourlyForecastEl = document.getElementById('hourly-forecast');
    const fiveDayForecastEl = document.getElementById('five-day-forecast');
    const cityInputEl = document.getElementById('city-input');
    const searchBtn = document.getElementById('search-btn');

    const fetchWeatherData = (lat, lon) => {
        // API URLs for free plan
        const currentApiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;
        const forecastApiUrl = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;

        // Fetch both current weather and forecast data
        Promise.all([fetch(currentApiUrl), fetch(forecastApiUrl)])
            .then(responses => Promise.all(responses.map(res => res.json())))
            .then(([currentData, forecastData]) => {
                updateCurrentWeather(currentData);
                updateHourlyForecast(forecastData.list);
                updateFiveDayForecast(forecastData.list);
            })
            .catch(error => console.error("Error fetching weather data:", error));
    };

    const fetchCityCoordinates = (city) => {
        const geoApiUrl = `https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=1&appid=${apiKey}`;
        
        fetch(geoApiUrl)
            .then(response => response.json())
            .then(data => {
                if (data.length > 0) {
                    const { lat, lon, name } = data[0];
                    locationEl.textContent = name;
                    fetchWeatherData(lat, lon);
                } else {
                    alert("City not found!");
                }
            })
            .catch(error => console.error("Error fetching city coordinates:", error));
    };

    const updateCurrentWeather = (data) => {
        currentTempEl.textContent = `${Math.round(data.main.temp)}°C`;
        feelsLikeEl.textContent = `Feels like ${Math.round(data.main.feels_like)}°C`;
        weatherDescriptionEl.textContent = data.weather[0].description;
        currentIconEl.src = `http://openweathermap.org/img/wn/${data.weather[0].icon}@4x.png`;
        windSpeedEl.textContent = `${(data.wind.speed * 3.6).toFixed(1)} km/h`;
        humidityEl.textContent = `${data.main.humidity}%`;
        pressureEl.textContent = `${data.main.pressure} hPa`;
        sunriseEl.textContent = new Date(data.sys.sunrise * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        sunsetEl.textContent = new Date(data.sys.sunset * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        // Note: UV index is not available in the free current weather API.
        uvIndexEl.textContent = 'N/A'; 
    };

    const updateHourlyForecast = (forecastList) => {
        hourlyForecastEl.innerHTML = '';
        forecastList.slice(0, 7).forEach(item => {
            const time = new Date(item.dt * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true });
            const temp = `${Math.round(item.main.temp)}°C`;
            const icon = item.weather[0].icon;
            
            const hourItem = document.createElement('div');
            hourItem.classList.add('hour-item');
            hourItem.innerHTML = `
                <p>${time}</p>
                <img src="http://openweathermap.org/img/wn/${icon}.png" alt="weather icon">
                <p>${temp}</p>
            `;
            hourlyForecastEl.appendChild(hourItem);
        });
    };
    
    const updateFiveDayForecast = (forecastList) => {
        fiveDayForecastEl.innerHTML = '';
        const dailyData = {};

        forecastList.forEach(item => {
            const date = new Date(item.dt * 1000).toLocaleDateString('en-CA'); // YYYY-MM-DD format
            if (!dailyData[date]) {
                dailyData[date] = {
                    temps: [],
                    icons: [],
                    dt: item.dt
                };
            }
            dailyData[date].temps.push(item.main.temp);
            dailyData[date].icons.push(item.weather[0].icon);
        });
        
        Object.values(dailyData).slice(0, 5).forEach(day => {
            const dayName = new Date(day.dt * 1000).toLocaleDateString('en-US', { weekday: 'short' });
            const maxTemp = Math.round(Math.max(...day.temps));
            const minTemp = Math.round(Math.min(...day.temps));
            const icon = day.icons[Math.floor(day.icons.length / 2)]; // Get icon from middle of the day

            const dayItem = document.createElement('div');
            dayItem.classList.add('day-item');
            dayItem.innerHTML = `
                <p>${dayName}</p>
                <img src="http://openweathermap.org/img/wn/${icon}@2x.png" alt="weather icon">
                <p class="temp">${maxTemp}° / ${minTemp}°</p>
            `;
            fiveDayForecastEl.appendChild(dayItem);
        });
    };
    
    const getLocation = () => {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const { latitude, longitude } = position.coords;
                    fetchCityName(latitude, longitude);
                    fetchWeatherData(latitude, longitude);
                },
                () => { fetchCityCoordinates('London'); } // Fallback
            );
        } else {
             fetchCityCoordinates('London'); // Fallback
        }
    };
    
    const fetchCityName = (lat, lon) => {
        const geoApiUrl = `https://api.openweathermap.org/geo/1.0/reverse?lat=${lat}&lon=${lon}&limit=1&appid=${apiKey}`;
        fetch(geoApiUrl)
            .then(res => res.json())
            .then(data => {
                if (data.length > 0) { locationEl.textContent = data[0].name; }
            });
    };

    searchBtn.addEventListener('click', () => {
        const city = cityInputEl.value;
        if (city) { fetchCityCoordinates(city); }
    });

    cityInputEl.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') { searchBtn.click(); }
    });
    
    getLocation(); // Initial load
});
     </script>
</body>
</html>